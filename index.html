<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Crafting</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¨ Sistema de Crafting & Vendas</h1>
            <div class="header-buttons">
                <span id="sync-status" class="sync-status">ğŸ”„ Conectando...</span>
                <button id="manage-recipes-btn" class="manage-btn">âš™ï¸ Gerenciar Receitas</button>
            </div>
        </div>
        
        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="crafting">ğŸ”¨ Crafting</button>
            <button class="tab-btn" data-tab="npc-sales">ğŸ’° Venda NPC</button>
            <button class="tab-btn" data-tab="third-party">ğŸ›’ Compra de Terceiros</button>
        </div>
        
        <!-- Tab Content: Crafting -->
        <div id="crafting-tab" class="tab-content active">
            <div class="craft-section">
                <div class="input-group">
                    <label for="item-select">Item para Craftar:</label>
                    <select id="item-select">
                        <option value="">-- Selecione um item --</option>
                    </select>
                </div>
            
            <div class="input-group">
                <label for="quantity">Quantidade:</label>
                <input type="number" id="quantity" value="1" min="1">
            </div>
            
            <button id="calculate-btn">Calcular Recursos</button>
            <button id="add-to-list-btn" class="add-to-list-btn">â• Adicionar Ã  Lista</button>
            <button id="clear-btn">Limpar</button>
        </div>
        
        <div id="craft-list-section" class="craft-list-section hidden">
            <h2>ğŸ“‹ Lista de Crafting</h2>
            <div id="craft-list"></div>
            <div class="list-actions">
                <button id="calculate-total-btn" class="calculate-total-btn">ğŸ§® Calcular Total</button>
                <button id="clear-list-btn" class="clear-list-btn">ğŸ—‘ï¸ Limpar Lista</button>
            </div>
        </div>
        
        <div id="results" class="results hidden">
            <h2>ğŸ“Š Recursos NecessÃ¡rios</h2>
            <div id="resources-list"></div>
            
            <h3>ğŸ”„ Ãrvore de Crafting</h3>
            <div id="craft-tree"></div>
        </div>
        </div>

        <!-- Tab Content: NPC Sales -->
        <div id="npc-sales-tab" class="tab-content">
            <div class="npc-section">
                <div class="input-group">
                    <label for="npc-select">Selecione o NPC:</label>
                    <select id="npc-select">
                        <option value="">-- Selecione um NPC --</option>
                        <option value="galpao">ğŸšï¸ NPC GalpÃ£o</option>
                        <option value="garagem-sul">ğŸš— NPC Garagem Sul</option>
                    </select>
                </div>
                
                <div id="npc-items-section" class="npc-items-section hidden">
                    <h3 id="npc-title"></h3>
                    <div id="npc-items-list"></div>
                    
                    <div class="npc-total">
                        <h3>ğŸ’° Total da Venda</h3>
                        <div class="total-value">$<span id="npc-total-value">0</span></div>
                        <button id="clear-npc-btn" class="clear-btn">ğŸ—‘ï¸ Limpar SeleÃ§Ã£o</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Content: Third Party Purchase -->
        <div id="third-party-tab" class="tab-content">
            <div class="third-party-section">
                <div class="tax-selection">
                    <label>Tipo de NegociaÃ§Ã£o:</label>
                    <div class="tax-buttons">
                        <button class="tax-btn active" data-tax="20">ğŸ‘¤ Normal (20%)</button>
                        <button class="tax-btn" data-tax="10">ğŸ¤ Aliados (10%)</button>
                    </div>
                </div>
                
                <div class="item-search-section">
                    <label for="item-search-input">Adicionar Item:</label>
                    <div class="search-input-wrapper">
                        <input type="text" id="item-search-input" placeholder="Digite o nome do item..." autocomplete="off">
                        <div id="item-suggestions" class="item-suggestions hidden"></div>
                    </div>
                </div>
                
                <div id="third-party-items-section" class="third-party-items-section">
                    <h3>Itens Selecionados</h3>
                    <div id="third-party-items-list" class="items-grid"></div>
                    
                    <div class="third-party-summary">
                        <div class="summary-row">
                            <span class="summary-label">Valor Base:</span>
                            <span class="summary-value">$<span id="third-party-base-value">0</span></span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Taxa (<span id="third-party-tax-percent">20</span>%):</span>
                            <span class="summary-value tax-value">+$<span id="third-party-tax-value">0</span></span>
                        </div>
                        <div class="summary-row total-row">
                            <span class="summary-label">ğŸ’° Total a Pagar:</span>
                            <span class="summary-value total-value">$<span id="third-party-total-value">0</span></span>
                        </div>
                        <button id="clear-third-party-btn" class="clear-btn">ğŸ—‘ï¸ Limpar SeleÃ§Ã£o</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Gerenciamento de Receitas -->
    <div id="recipe-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>âš™ï¸ Gerenciar Receitas</h2>
                <button id="close-modal" class="close-btn">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="add-recipe-section">
                    <h3>â• Adicionar Nova Receita</h3>
                    
                    <div class="input-group">
                        <label for="new-item-name">Nome do Item:</label>
                        <input type="text" id="new-item-name" placeholder="Ex: Fuzil AK">
                    </div>
                    
                    <div class="input-group">
                        <label for="new-item-output">Quantidade que rende:</label>
                        <input type="number" id="new-item-output" value="1" min="1">
                    </div>
                    
                    <div class="input-group">
                        <label for="new-item-image">URL da Imagem (opcional):</label>
                        <input type="text" id="new-item-image" placeholder="https://exemplo.com/imagem.png">
                        <div class="image-preview" id="image-preview"></div>
                    </div>
                    
                    <h4>Materiais NecessÃ¡rios:</h4>
                    <div id="materials-list">
                        <div class="material-row">
                            <input type="text" class="material-name" placeholder="Nome do material">
                            <input type="number" class="material-quantity" placeholder="Quantidade" min="1" value="1">
                            <button class="remove-material-btn" onclick="removeMaterial(this)">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                    <button id="add-material-btn" class="secondary-btn">+ Adicionar Material</button>
                    
                    <button id="save-recipe-btn" class="primary-btn">ğŸ’¾ Salvar Receita</button>
                    <button id="cancel-edit-btn" class="cancel-btn hidden">âŒ Cancelar EdiÃ§Ã£o</button>
                </div>
                
                <div class="recipes-list-section">
                    <h3>ğŸ“‹ Receitas Cadastradas</h3>
                    <div class="filter-group">
                        <input type="text" id="filter-recipes" placeholder="Filtrar receitas...">
                    </div>
                    <div id="existing-recipes"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script src="recipes.js"></script>
    <script src="app.js"></script>
</body>
</html>
